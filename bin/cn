#!/usr/bin/env sh
# cn - Coherent Network agent CLI
# OCaml source: tools/src/cn/
# Bundled JS: tools/dist/cn.js

# Resolve symlinks to find actual script location
SCRIPT="$0"
while [ -L "$SCRIPT" ]; do
  SCRIPT_DIR="$(cd "$(dirname "$SCRIPT")" && pwd)"
  SCRIPT="$(readlink "$SCRIPT")"
  [ "${SCRIPT%${SCRIPT#?}}" != "/" ] && SCRIPT="$SCRIPT_DIR/$SCRIPT"
done
SCRIPT_DIR="$(cd "$(dirname "$SCRIPT")" && pwd)"

DIST="$SCRIPT_DIR/../tools/dist/cn.js"

if [ ! -f "$DIST" ]; then
  echo "Error: tools/dist/cn.js not found."
  echo "Run 'npm run build' in the cn-agent directory first."
  exit 1
fi

exec node "$DIST" "$@"
